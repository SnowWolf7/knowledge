用例图描述了系统做什么；类图描述了组成系统结构各部分的各种类型。这缺少了一部分内容，因为单凭用例和类还无法描述系统实际上将如何运作。为了满足这方面的要求，就需要使用交互图，特别是顺序图。

顺序图作为交互图的重要成员，它描述了系统运行时各对象之间如何进行交互。除顺序图之外，UML2.0中的交互视图还包括通信图和时序图。

## 定义顺序图

顺序图描述了对象之间传递消息的时间顺序，它用来表示用例中的行为顺序。

顺序图的主要用途之一是为用例建造逻辑建模。

## 顺序图的组成

顺序图主要有四个标记符：对象、生命线、消息和激活。

![](/Users/SnowWolf7/Desktop/软件工程/书籍/UML 面向对象设计与分析/图/顺序图.jpg)

### 对象与生命线

### 消息

在UML中，有4种类型的消息：同步消息、异步消息、简单消息和返回消息。

![](/Users/SnowWolf7/Desktop/软件工程/书籍/UML 面向对象设计与分析/图/消息.png)

## 创建对象和分支、从属流

顺序图中的对象并不一定需要在顺序图的整个交互期间存活，对象可以根据传递进来的消息创建或销毁。

### 创建对象

对象的创建有几种情况，对象默认在图的顶部说明在发送消息时，该对象已经存在。如果对象在执行过程中创建的，那么它应该处在图的中间部分。

创建一个对象就是发送一个create消息到该对象，顺图图中的其他对象都可以发送destroys消息来删除对象。要说明某个对象被销毁，需要在被销毁的对象的生命线上放一个X字符。

### 分支和从属流

有两种方式来修改顺序图的控制流：使用分支和使用从属流。控制流的改变是由于不同的条件导致控制流走向不同的道路。

分支允许控制流走向不同的对象。需要注意的是分支消息的开始的位置都是相同的，分支消息的结束“高度”也是相同的。

与分支消息不同，从属流允许某一个对象根据不同的条件改变执行不同的操作，即创建对象的另一条生命线分支。

## 建模时间

消息箭头通常是水平的，说明传递消息的时间很短，在此期间不会“发生”其他事情。如果消息的传递需要一定时间，在此期间可以出现其他事情，则消息箭头可以画为向下倾斜的。

对于延时消息，我们可以向这些消息添加约束来指定需要消息执行的时间框架。对消息的时间约束标记是一个注释框。

![](/Users/SnowWolf7/Desktop/软件工程/书籍/UML 面向对象设计与分析/图/延时约束.png)

## 建模迭代

建模迭代可以实现消息的重复执行。在顺序图中，建模人员常用的建模迭代消息是通过一个矩形把重复执行的消息包括在矩形框中，并且提供一个控制重复执行的控制条件。

如果一个对象向它自身重复发送消息，那么就构成了递归。（此处需添加图片）

## 消息中的参数和序号

顺序图中的消息出了具有消息名称之外还可以包含许多附加消息。例如，在消息中包含参数、返回值和序列表达式。

## 管理复杂交互的顺序图片段

在UML2.0中，为了帮助建模者处理顺序图中需要捕捉的细节，穿件有组织且结构化的顺序图，以显示复杂的交互、例如循环和迭代。为此UML2.0提供了顺序图片段。

## 创建顺序图模型

创建顺序图包含4项任务：

+ 确定需要建模的用例。
+ 确定用例的工作流。
+ 确定各工作流所涉及的对象，并按从左到右顺序进行布置。
+ 添加消息和条件以便创建每一个工作流。

### 确定用例与工作流

建模顺序图的第一步是确定要建模的用例。系统完整顺序图模型是为每一个用例创建顺序图。

### 布置对象与添加消息

在确定用例的工作流后，下一步是从左到右布置工作流所涉及到的所有参与者和对象。

接下来就要为没个工作流作为独立的顺序图建模。

在刚开始绘制顺序图时，不需要过多关心消息的类型。关于消息的类型可以在以后的分析中确定。

在绘制完用例的各种工作流顺序图后，可以将各工作流顺序图合并为一个顺序图。